vim.cmd[[
    function! CleverTab()
        if strpart( getline('.'), 0, col('.')-1 ) =~ '^\s*$'
            return "\<Tab>"
        else
            return "\<C-N>"
        endif
            endfunction
    inoremap <Tab> <C-R>=CleverTab()<CR>
]]
